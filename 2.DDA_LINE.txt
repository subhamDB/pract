#include <GL/glut.h>
#include <cmath>
#include <iostream>  // Required for std::cin and std::cout

// Global variables to store user input
int x1, y1, x2, y2;

void init() {
    glClearColor(0, 0, 0, 1);               // Black background
    glColor3f(1, 1, 1);                     // White drawing color
    glPointSize(2.0);                       // Point size
    glMatrixMode(GL_PROJECTION);
    gluOrtho2D(0, 500, 0, 500);             // Set 2D orthographic projection
}

// Function to plot a pixel
void setPixel(int x, int y) {
    glBegin(GL_POINTS);
    glVertex2i(x, y);
    glEnd();
    glFlush();
}

// DDA line drawing function
void dda(int x1, int y1, int x2, int y2) {
    float dx = x2 - x1;
    float dy = y2 - y1;
    float steps = (fabs(dx) > fabs(dy)) ? fabs(dx) : fabs(dy);

    float xinc = dx / steps;
    float yinc = dy / steps;

    float x = x1;
    float y = y1;

    for (int i = 0; i <= steps; i++) {
        setPixel(round(x), round(y));
        x += xinc;
        y += yinc;
    }
}

// Display callback for GLUT
void display() {
    glClear(GL_COLOR_BUFFER_BIT);          // Clear the screen
    dda(x1, y1, x2, y2);                   // Call DDA with user input
    glFlush();
}

int main(int argc, char** argv) {
    // Take input from user
    std::cout << "Enter the starting point (x1 y1): ";
    std::cin >> x1 >> y1;
    std::cout << "Enter the ending point (x2 y2): ";
    std::cin >> x2 >> y2;

    // Initialize GLUT and create window
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(500, 500);               // Window size
    glutInitWindowPosition(100, 100);           // Window position
    glutCreateWindow("DDA Line Drawing");

    init();                                     // Call initialization
    glutDisplayFunc(display);                   // Register display callback
    glutMainLoop();                             // Start event loop

    return 0;
}
